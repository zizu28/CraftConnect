@using CraftConnect.WASM.ViewModels
<div class="faq-item">
    <button class="faq-question" @onclick="ToggleAnswer">
        <span>@Item.Question</span>
        <svg class="chevron @(isOpen ? "open" : "")" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
        </svg>
    </button>

    @if (isOpen)
    {
        <div class="faq-answer">
            <p>@Item.Answer</p>
            <div class="was-helpful">
                <span>Was this helpful?</span>
                <button class="helpful-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M1 13.25A2.25 2.25 0 0 1 3.25 11h11a2.25 2.25 0 0 1 2.25 2.25v2.5A2.25 2.25 0 0 1 14.25 18h-11A2.25 2.25 0 0 1 1 15.75v-2.5ZM3.25 12.5a.75.75 0 0 0-.75.75v2.5c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-2.5a.75.75 0 0 0-.75-.75h-11Z" />
                        <path d="M10.28 2.22a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06L9 4.81V9.75a.75.75 0 0 0 1.5 0V4.81l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z" />
                    </svg>
                    Yes
                </button>
                <button class="helpful-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M19 6.75A2.25 2.25 0 0 1 16.75 9h-11A2.25 2.25 0 0 1 3.5 6.75v-2.5A2.25 2.25 0 0 1 5.75 2h11A2.25 2.25 0 0 1 19 4.25v2.5ZM16.75 7.5a.75.75 0 0 0 .75-.75v-2.5a.75.75 0 0 0-.75-.75h-11a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 .75.75h11Z" />
                        <path d="M9.72 17.78a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06L11 15.19V10.25a.75.75 0 0 0-1.5 0v4.94l-1.72-1.72a.75.75 0 1 0-1.06 1.06l3 3Z" />
                    </svg>
                    No
                </button>
            </div>
        </div>
    }
</div>

@code {
    [Parameter]
    public FaqItem Item { get; set; }

    private bool isOpen = false;

    protected override void OnParametersSet()
    {
        // Automatically open the first item
        if (Item.Id.ToString() is not null)
        {
            isOpen = true;
        }
    }

    private void ToggleAnswer()
    {
        isOpen = !isOpen;
    }
}