@using CraftConnect.WASM.ViewModels
<div class="chat-message-row @(Message.IsSentByUser ? "sent" : "received")">
    @if (!Message.IsSentByUser)
    {
        <img class="avatar" src="@Message.SenderAvatarUrl" alt="@Message.SenderName" />
    }

    <div class="message-content">
        <div class="message-bubble">
            <p>@Message.MessageText</p>

            @if (Message.Attachment != null)
            {
                <a href="@Message.Attachment.DownloadUrl" class="attachment-link" target="_blank" rel="noopener noreferrer">
                    <i class="bi bi-file-earmark"></i>
                    <span>@Message.Attachment.FileName</span>
                </a>
            }
        </div>
        <div class="message-footer">
            <span class="timestamp">@Message.Timestamp</span>
            @if (Message.IsSentByUser && Message.IsSeen)
            {
                <span class="seen-status"> • Seen</span>
            }
        </div>
    </div>

    @if (Message.IsSentByUser)
    {
        <img class="avatar" src="@Message.SenderAvatarUrl" alt="@Message.SenderName" />
    }
</div>

@code {
    [Parameter]
    public ChatMessageDataVM Message { get; set; } = new();
}
