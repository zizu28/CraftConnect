@using CraftConnect.WASM.ViewModels
<div class="message-history-container">
    <div class="message-list">
        @foreach (var message in Messages)
        {
            <div class="message-item @(message.IsYou ? "you" : "other")">
                <div class="message-avatar">@message.AuthorInitials</div>
                <div class="message-content">
                    <div class="message-header">
                        <span class="author-name">@message.AuthorName</span>
                        <span class="timestamp">@FormatTimestamp(message.Timestamp)</span>
                    </div>
                    <div class="message-bubble">
                        @message.Content
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="message-input-area">
        <textarea class="message-input" placeholder="Type your message..."></textarea>
        <div class="message-actions">
            <button class="attach-btn">
                <i class="bi bi-paperclip"></i>
                Attach
            </button>
            <button class="send-btn">
                Send Message
                <i class="bi bi-send"></i>
            </button>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public List<MessageVM> Messages { get; set; } = new();

    private string FormatTimestamp(DateTime timestamp)
    {
        // Simple formatter. You could make this more complex (e.g., "Today at 10:15 AM")
        return timestamp.ToString("MMM dd, yyyy, hh:mm tt");
    }
}
