@using Microsoft.AspNetCore.Components.Forms

<InputFile OnChange="LoadFiles" multiple class="file-uploader" />
<div class="drop-zone @(isDragOver ? "drag-over" : "")"
     @ondragenter="SetDragOver"
     @ondragleave="ClearDragOver"
     @ondrop="ClearDragOver">

    <i class="bi bi-cloud-arrow-up-fill" style="font-size: 2rem;"></i>
    <p>Drag & drop files here or <span class="browse-link">browse</span></p>

    <!-- Display selected file names -->
    @if (fileNames.Any())
    {
        <div class="file-list">
            @foreach (var name in fileNames)
            {
                <span class="file-name">@name</span>
            }
        </div>
    }
</div>

@code {
    [Parameter]
    public EventCallback<IReadOnlyList<IBrowserFile>> OnFilesChanged { get; set; }

    private bool isDragOver = false;
    private List<string> fileNames = new();

    private async Task LoadFiles(InputFileChangeEventArgs e)
    {
        isDragOver = false;
        fileNames.Clear();
        foreach (var file in e.GetMultipleFiles())
        {
            fileNames.Add(file.Name);
        }
        await OnFilesChanged.InvokeAsync(e.GetMultipleFiles());
    }

    private void SetDragOver() => isDragOver = true;
    private void ClearDragOver() => isDragOver = false;
}