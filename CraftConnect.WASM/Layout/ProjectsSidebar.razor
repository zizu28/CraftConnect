@inject NavigationManager Navigation
@implements IDisposable

<nav class="projects-sidebar">
    <div class="sidebar-top">
        <div class="user-profile">
            <div class="user-avatar">JD</div>
            <div class="user-info">
                <span class="user-name">John Doe</span>
                <span class="user-title">Master Carpenter</span>
            </div>
        </div>

        <div class="nav-links">
            <NavLink href="/dashboard" class="nav-item">
                <i class="bi bi-speedometer2"></i>
                <span>Dashboard</span>
            </NavLink>
            <NavLink href="/projects" class="nav-item" Match="NavLinkMatch.All">
                <i class="bi bi-briefcase-fill"></i>
                <span>Projects</span>
            </NavLink>
            <NavLink href="/messages" class="nav-item">
                <i class="bi bi-chat-dots-fill"></i>
                <span>Messages</span>
            </NavLink>
            <NavLink href="/profile" class="nav-item">
                <i class="bi bi-person-fill"></i>
                <span>Profile</span>
            </NavLink>
        </div>

        <button class="btn btn-primary-sidebar">New Project</button>
    </div>

    <div class="sidebar-bottom">
        <NavLink href="/settings" class="nav-item">
            <i class="bi bi-gear-fill"></i>
            <span>Settings</span>
        </NavLink>
        <NavLink href="/logout" class="nav-item">
            <i class="bi bi-box-arrow-right"></i>
            <span>Logout</span>
        </NavLink>
    </div>
</nav>

@code {
    private string currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = Navigation.Uri;
        Navigation.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object sender, LocationChangedEventArgs e)
    {
        currentUrl = e.Location;
        StateHasChanged();
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }
}