@page "/admin/system-health"
@layout AdminLayout
@using CraftConnect.WASM.Layout.AdminPageLayouts
@using CraftConnect.WASM.Components.AdminPagesComponents.SystemHealthPageComponents
@using CraftConnect.WASM.ViewModels

<div class="system-health-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1>System Health Monitoring</h1>
        <div class="header-actions">
            <span class="date-selector">
                <button class="btn-icon"><i class="bi bi-chevron-left"></i></button>
                <span class="date-text">October 2023</span>
                <button class="btn-icon"><i class="bi bi-chevron-right"></i></button>
            </span>
            <button class="btn btn-primary">
                <i class="bi bi-arrow-clockwise"></i>
                Refresh
            </button>
        </div>
    </header>
    <p class="page-description">
        Real-time insights into the platform's operational status.
    </p>

    <!-- Stat Cards -->
    <div class="stat-card-grid">
        @foreach (var stat in healthModel.Stats)
        {
            <HealthStatCard Title="@stat.Title" Value="@stat.Value" Status="@stat.Status" StatusMessage="@stat.StatusMessage" />
        }
    </div>

    <!-- Charts -->
    <div class="chart-grid">
        <ApiResponseChart />
        <BackgroundJobChart />
    </div>
</div>

@code {
    private SystemHealthModel healthModel = new();

    protected override void OnInitialized()
    {
        healthModel.Stats = new List<HealthStat>
        {
            new HealthStat { Title = "Server Uptime", Value = "99.98%", Status = "Healthy", StatusMessage = "Healthy" },
            new HealthStat { Title = "Database Connection", Value = "Healthy", Status = "Healthy", StatusMessage = "Healthy" },
            new HealthStat { Title = "API Response Time", Value = "120ms", Status = "Fast", StatusMessage = "Fast" },
            new HealthStat { Title = "Background Jobs", Value = "5 Pending", Status = "Warning", StatusMessage = "Warning" },
            new HealthStat { Title = "Message Queue", Value = "Healthy", Status = "Healthy", StatusMessage = "Healthy" }
        };
    }
}