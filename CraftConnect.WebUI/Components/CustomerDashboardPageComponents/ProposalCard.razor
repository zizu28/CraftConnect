<div class="proposal-card">
    <div class="proposal-header">
        <div class="craftsman-info">
            <img class="craftsman-avatar" src="@(string.IsNullOrEmpty(Proposal.CraftsmanAvatarUrl) ? "https://placehold.co/40x40/FBBF24/78350F?text=JS" : Proposal.CraftsmanAvatarUrl)" alt="@Proposal.CraftsmanName" />
            <div>
                <span class="craftsman-name">@Proposal.CraftsmanName</span>
                <div class="craftsman-rating">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.868 2.884c.321-.772 1.415-.772 1.736 0l1.83 4.401 4.79 1.149c.82.198 1.135 1.106.546 1.691l-3.473 3.383 1.03 4.887c.172.816-.722 1.439-1.442 1.053L10 15.545l-4.257 2.238c-.72.386-1.614-.237-1.442-1.053l1.03-4.887L1.69 10.125c-.59-.585-.274-1.493.546-1.691l4.79-1.149z" clip-rule="evenodd" /></svg>
                    <span>@Proposal.CraftsmanRating.ToString("F1")</span>
                </div>
            </div>
        </div>
        <span class="proposal-price">@Proposal.Price.ToString("C0", new System.Globalization.CultureInfo("en-US"))</span>
    </div>

    <p class="proposal-excerpt">@Proposal.Excerpt</p>

    <div class="proposal-actions">
        <a href="@Proposal.ProposalUrl" class="action-btn btn-primary">View Proposal</a>
        <a href="@Proposal.ProfileUrl" class="action-btn btn-secondary">View Profile</a>
    </div>
</div>

@code {
    [Parameter]
    public CustomerProposalSummaryVM Proposal { get; set; }

    protected override Task OnInitializedAsync()
    {
        Proposal.ProfileUrl = $"https://localhost:7284/craftsman/{Proposal.Id}";
        Proposal.ProposalUrl = $"https://localhost:7284/proposals/{Proposal.Id}";
        return base.OnInitializedAsync();
    }
}
