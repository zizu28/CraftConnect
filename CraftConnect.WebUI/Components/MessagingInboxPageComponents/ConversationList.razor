<div class="conversation-list-wrapper">
    <h4 class="list-title">Conversations</h4>

    <div class="search-box">
        <i class="bi bi-search"></i>
        <input type="text" placeholder="Search conversations" />
    </div>

    <div class="conversation-previews">
        @foreach (var conv in Conversations)
        {
            <div class="conversation-preview-item @(conv.IsActive ? "active" : "")" @onclick="() => OnConversationSelect.InvokeAsync(conv)">
                <div class="avatar-and-name">
                    <img src="@conv.PartnerAvatarUrl" alt="@conv.PartnerName" class="partner-avatar" />
                    @if (conv.IsOnline)
                    {
                        <span class="online-dot"></span>
                    }
                    <div class="text-content">
                        <p class="partner-name">@conv.PartnerName</p>
                        <p class="snippet">@conv.LastMessageSnippet</p>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@code {
    [Parameter]
    public List<ConversationPreviewVM> Conversations { get; set; } = new();

    [Parameter]
    public EventCallback<ConversationPreviewVM> OnConversationSelect { get; set; }
}