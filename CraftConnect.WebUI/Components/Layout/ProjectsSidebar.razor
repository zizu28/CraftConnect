@inject NavigationManager Navigation
@implements IDisposable

<nav class="projects-sidebar">
    <div class="sidebar-top">
        <div class="user-profile">
            <div class="user-avatar">JD</div>
            <div class="user-info">
                <span class="user-name">John Doe</span>
                <span class="user-title">Master Carpenter</span>
            </div>
        </div>

        <div class="nav-links">
            <NavLink href="/dashboard" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.25 2A2.25 2.25 0 002 4.25v11.5A2.25 2.25 0 004.25 18h11.5A2.25 2.25 0 0018 15.75V4.25A2.25 2.25 0 0015.75 2H4.25zM6.5 6a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 016.5 6zM9.25 6A.75.75 0 0110 6.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 019.25 6zm2.75.75a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5zM15.5 6a.75.75 0 01.75.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 0115.5 6z" clip-rule="evenodd" /></svg>
                <span>Dashboard</span>
            </NavLink>
            <NavLink href="/projects" class="nav-item" Match="NavLinkMatch.All">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2 4.25A2.25 2.25 0 014.25 2h11.5A2.25 2.25 0 0118 4.25v8.5A2.25 2.25 0 0115.75 15H4.25A2.25 2.25 0 012 12.75v-8.5zm1.5 0a.75.75 0 01.75-.75h11.5a.75.75 0 01.75.75v8.5a.75.75 0 01-.75.75H4.25a.75.75 0 01-.75-.75v-8.5z" clip-rule="evenodd" /><path d="M2 16.75A.75.75 0 012.75 16h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75z" /></svg>
                <span>Projects</span>
            </NavLink>
            <NavLink href="/messages" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M2 3.5A1.5 1.5 0 013.5 2h13A1.5 1.5 0 0118 3.5v10A1.5 1.5 0 0116.5 15H13l-3 3-3-3H3.5A1.5 1.5 0 012 13.5v-10zm1.5.5a.5.5 0 000 1h13a.5.5 0 000-1h-13zM15 7a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1A.5.5 0 0115 7zm-5 0a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1A.5.5 0 0110 7zM5 7a.5.5 0 01.5.5v1a.5.5 0 01-1 0v-1A.5.5 0 015 7z" clip-rule="evenodd" /></svg>
                <span>Messages</span>
            </NavLink>
            <NavLink href="/profile" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-5.5-2.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zM10 12a5.99 5.99 0 00-4.793 2.39A6.483 6.483 0 0010 16.5a6.483 6.483 0 004.793-2.11A5.99 5.99 0 0010 12z" clip-rule="evenodd" /></svg>
                <span>Profile</span>
            </NavLink>
        </div>

        <button class="btn btn-primary-sidebar">New Project</button>
    </div>

    <div class="sidebar-bottom">
        <NavLink href="/settings" class="nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.26.96c-1.4-1.03-3.08.3-2.05 1.7A1.532 1.532 0 013.17 7.49c-1.56.38-1.56 2.6 0 2.98a1.532 1.532 0 01-.96 2.26c-1.03 1.4.3 3.08 1.7 2.05a1.532 1.532 0 012.26.96c.38 1.56 2.6 1.56 2.98 0a1.532 1.532 0 012.26-.96c1.4 1.03 3.08-.3 2.05-1.7a1.532 1.532 0 01.96-2.26c1.56-.38 1.56-2.6 0-2.98a1.532 1.532 0 01-.96-2.26c-1.03-1.4.3-3.08 1.7-2.05a1.532 1.532 0 012.26-.96c.38-1.56 2.6-1.56 2.98 0a1.532 1.532 0 012.26.96c1.4-1.03 3.08.3 2.05 1.7A1.532 1.532 0 0116.83 7.49c1.56.38 1.56 2.6 0 2.98a1.532 1.532 0 01-.96 2.26c-1.03 1.4.3 3.08 1.7 2.05a1.532 1.532 0 012.26.96c.38 1.56 2.6 1.56 2.98 0a1.532 1.532 0 012.26-.96c1.4 1.03 3.08-.3 2.05-1.7a1.532 1.532 0 01.96-2.26c1.56-.38 1.56-2.6 0-2.98a1.532 1.532 0 01-.96-2.26c-1.03-1.4.3-3.08 1.7-2.05a1.532 1.532 0 012.26-.96zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
            <span>Settings</span>
        </NavLink>
        <NavLink href="/logout" class="nav-item">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M19 10a.75.75 0 00-.75-.75H8.704l1.048-.943a.75.75 0 10-1.004-1.114l-2.5 2.25a.75.75 0 000 1.114l2.5 2.25a.75.75 0 101.004-1.114l-1.048-.943H18.25A.75.75 0 0019 10z" clip-rule="evenodd" /></svg>
            <span>Logout</span>
        </NavLink>
    </div>
</nav>

@code {
    private string currentUrl;

    protected override void OnInitialized()
    {
        currentUrl = Navigation.Uri;
        Navigation.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object sender, LocationChangedEventArgs e)
    {
        currentUrl = e.Location;
        StateHasChanged();
    }

    public void Dispose()
    {
        Navigation.LocationChanged -= OnLocationChanged;
    }
}