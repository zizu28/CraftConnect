@page "/admin/system-health"
@layout AdminLayout
@using CraftConnect.WebUI.Components.AdminPagesComponents.SystemHealthPageComponents
@using CraftConnect.WebUI.Components.Layout.AdminPageLayouts

<div class="system-health-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1>System Health Monitoring</h1>
        <div class="header-actions">
            <span class="date-selector">
                <button class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" /></svg></button>
                <span class="date-text">October 2023</span>
                <button class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" /></svg></button>
            </span>
            <button class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M15.312 11.424a5.5 5.5 0 01-9.216 4.15l-1.622 1.622a.75.75 0 11-1.06-1.06l1.622-1.622a5.5 5.5 0 0110.276-3.09zM4.688 8.576a5.5 5.5 0 019.216-4.15l1.622-1.622a.75.75 0 111.06 1.06l-1.622 1.622a5.5 5.5 0 01-10.276 3.09z" clip-rule="evenodd" /></svg>
                Refresh
            </button>
        </div>
    </header>
    <p class="page-description">
        Real-time insights into the platform's operational status.
    </p>

    <!-- Stat Cards -->
    <div class="stat-card-grid">
        @foreach (var stat in healthModel.Stats)
        {
            <HealthStatCard Title="@stat.Title" Value="@stat.Value" Status="@stat.Status" StatusMessage="@stat.StatusMessage" />
        }
    </div>

    <!-- Charts -->
    <div class="chart-grid">
        <ApiResponseChart />
        <BackgroundJobChart />
    </div>
</div>

@code {
    private SystemHealthModel healthModel = new();

    protected override void OnInitialized()
    {
        healthModel.Stats = new List<HealthStat>
        {
            new HealthStat { Title = "Server Uptime", Value = "99.98%", Status = "Healthy", StatusMessage = "Healthy" },
            new HealthStat { Title = "Database Connection", Value = "Healthy", Status = "Healthy", StatusMessage = "Healthy" },
            new HealthStat { Title = "API Response Time", Value = "120ms", Status = "Fast", StatusMessage = "Fast" },
            new HealthStat { Title = "Background Jobs", Value = "5 Pending", Status = "Warning", StatusMessage = "Warning" },
            new HealthStat { Title = "Message Queue", Value = "Healthy", Status = "Healthy", StatusMessage = "Healthy" }
        };
    }
}