@using CraftConnect.WebUI.Services
@inject ThemeService ThemeService

<header class="navbar-container post-project-nav">
    <div class="navbar-content">
        <a href="/" class="brand-logo">
            <img src="/images/craftconnect-logo.png" alt="CraftConnect Logo" />
            CraftConnect
        </a>

        @* Hamburger Button - visible only on mobile *@
        <button class="hamburger-btn" @onclick="ToggleMenu">
            <i class="bi bi-list"></i>
        </button>

        @* Navigation Links and Buttons *@
        <nav class="nav-links @(isMenuOpen ? "open" : "")">
            <button class="btn theme-toggle-btn" @onclick="ThemeService.ToggleTheme" title="Toggle Theme">
                <i class="bi @(ThemeService.CurrentTheme == "light" ? "bi-moon" : "bi-sun")"></i>
            </button>
            @* Central Links *@
            <a href="/explore" class="nav-link">Explore</a>
            <a href="/how-it-works" class="nav-link">How it works</a>
            <a href="/contact" class="nav-link">Contact</a>

            @* Right Side Buttons *@
            <a href="/post-a-project" class="btn btn-primary btn-post-project">Post a Project</a>
            <a href="/login" class="btn btn-secondary btn-login">Log in</a>
        </nav>
    </div>
</header>

@code {
    private bool isMenuOpen = false;

    private void ToggleMenu()
    {
        isMenuOpen = !isMenuOpen;
    }

    protected override void OnInitialized()
    {
        ThemeService.OnThemeChanged += OnThemeChangedHandler;
    }

    private void OnThemeChangedHandler()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        ThemeService.OnThemeChanged -= OnThemeChangedHandler;
    }
}